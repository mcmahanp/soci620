<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Assignment 4, SOCI 620, Winter 2019</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Assignment 4, SOCI 620, Winter 2019</h1>
</header>
<p><em>Due Mon, Feb 11</em></p>
<p>This assignment uses a new data set that looks at people arrested in Toronto for possession of marijuana between 1997 and 2002. The data is part of an R package released by John Fox and Sanford Weisberg to accompany their book “An R Companion to Applied Regression.”</p>
<ol class="incremental" start="0" type="1">
<li><p><strong>Load the data and read the documentation.</strong></p>
<p>The following commands should install the <code>carData</code> package if you don’t already have it and load it into your R environment. If you get the message “Failed to install carData package!” it means something went wrong (I can email you the data set if you are having trouble installing the package).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(carData)){</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    <span class="kw">cat</span>(<span class="st">&#39;Package carData not installed.</span><span class="ch">\n</span><span class="st">Installing it now.</span><span class="ch">\n</span><span class="st">&#39;</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="kw">install.packages</span>(<span class="st">&#39;carData&#39;</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(carData)){</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    <span class="kw">cat</span>(<span class="st">&#39;Failed to install carData package!</span><span class="ch">\n</span><span class="st">&#39;</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">}</a></code></pre></div>
<p>The data we are using is in the <code>Arrests</code> data frame. You can see a description of the data by running <code>?Arrests</code> in R.</p></li>
<li><p><strong>Build an intercept-only model of arrestee release (<em>7 points</em>)</strong></p>
<p>For the remainder of this assignment, you will be investigating factors associated with the <code>released</code> variable in the <code>Arrests</code> dataset, which indicates “whether or not the arrestee was released with a summons.” Before building an explanatory model with covariates, we will build a simpler model looking only at this outcome variable.</p>
<ol class="incremental" type="a">
<li><p>What values does this variable take? Are there any missing values? How many people in the sample were released and how many were not?</p></li>
<li><p>To estimate the average rate of release, use the following regression model:</p>
<p><span class="math display">\[\begin{aligned}
 R_i &amp;\sim  \mathrm{Bernoulli}(p_i)\\
 \mathrm{logit}(p_i)&amp;=\alpha_i\\
 \alpha_i&amp;\sim \mathrm{Norm}(0,\mbox{??})
 \end{aligned}\]</span></p>
<p>Pick a standard deviation for the prior distribution on <span class="math inline">\(\alpha\)</span> that will put about 95% of the probability mass between <span class="math inline">\(p=0.1\)</span> and <span class="math inline">\(p=0.9\)</span>.</p>
<p>(Hint: you will need to figure out the appropriate limits in terms of <span class="math inline">\(\alpha\)</span>. The transformation between <span class="math inline">\(p\)</span> and <span class="math inline">\(\alpha\)</span> is shown in the second line of the model above.)</p></li>
<li><p>Estimate the model with the prior you chose, using either the <code>map()</code> or the <code>map2stan()</code> function from the <code>rethinking</code> package. What is the mean of the posterior of <span class="math inline">\(\alpha\)</span>? What does this tell us about the likely value of <span class="math inline">\(p\)</span>? Given our data, what is the 90% credible interval on the possible values of <span class="math inline">\(p\)</span>?</p>
<p>(Hint: to estimate the model, you will need to create an indicator variable that takes a value of 1 for people that were released with a summons and a value of 0 for people that were not.)</p>
<p>(Another hint: remember that “Bernoulli(<em>p</em>)” is the same thing as “Binomial(1,<em>p</em>).”)</p></li>
</ol></li>
<li><p><strong>Investigate the relationship between race and release (<em>7 points</em>)</strong></p>
<p>As a first step in examining possible social factors that influence the decision to release an arrestee with a summons, look at the relationship between release and the arrestee’s race. The variable for race in this data is (problematically) called <code>colour</code>, and it (problematically) takes only two values: “Black” and “White”.</p>
<ol class="incremental" type="a">
<li><p>Using the model from the previous question as a base, create a logistic regression model that allows for different average probability of release for white and Black arrestees. Write this model out in the format shown above, including the specific priors for all parameters in the model. (If you are having trouble typing the Greek letters, you can use Latin letters instead). Justify the priors you choose, paying attention to your data and model specification.</p></li>
<li><p>Estimate this new model using <code>map()</code> or <code>map2stan()</code> (you will need to make an indicator variable for either Black or white arrestees). What are the point estimates for the model parameters? What do these estimates mean in terms of the expected probability of release for white and Black arrestees?</p></li>
<li><p>Extract a random sample from the model fit. Use that sample to create figure that shows distinct posterior densities of release probability for white and Black arrestees. The figure should be on on the scale of <em>probabilities</em>, so you will need to transform the values from your sample. Do you see an obvious difference in release rates?</p>
<p>(Hint: when working with transformations like this, the order in which you perform operations on your samples matters. When in doubt, look at your model specification.)</p></li>
</ol></li>
<li><p><strong>Create a more complete model (<em>6 points</em>)</strong></p>
<p>Explaining arrestee release using only race is informative, but not an especially complete model. Here you will build a more complete model to try to explain release.</p>
<ol class="incremental" type="a">
<li><p>Using the variables in the data set, formulate a different model of arrestee release. You can use any combination of at least two of the available variables (including interactions if you like), but the model should be a logistic regression. Specify this model using probability notation (like above), including all prior distributions.</p></li>
<li><p>Estimate this new model using <code>map()</code> or <code>map2stan()</code>. What are the point estimates and credible intervals for the model parameters. What do these results mean in terms of probability of release for different kinds of people? Be specific.</p></li>
<li><p>Use WAIC to discuss whether this new model is preferable to the univariate model from question 2.</p></li>
</ol></li>
</ol>
</body>
</html>
